#Simulate Sudden Uncertainty Onset
library('tidyverse')
setwd('C:/Users/awalk/OneDrive/Documents/PhD/London/LBA practice')
source('LBASim.R', local = TRUE)
source('RW.R', TRUE)
source('runPart.R', TRUE)

#Set parameters (all in caps)
#Start-point bound
A <-5
#Threshold
B <- 10
#Decision Delay
T0 <- .5
#Standard Deviation
SD_V <- 1
#Learning Rate
ALPHA <- .8
#Rate transformation from scores (Similar to a temperature parameter)
PHI <- 2
#Starting values
QSTART <- .1

#Number of simulations
simNum = 100

#Number of trials
trialNum = 448

#Optimality tracker
simList <- matrix(ncol = simNum, nrow = trialNum)

for (p in 1:simNum) {
  sim <- runPart(A, B, T0, SD_V, ALPHA, PHI, QSTART)
  simList[1:trialNum, p] <- sim$optimal
}

condensedList <- apply(simList, 1, mean)

condensedList <- data.frame(trial = 1:trialNum, averageScore = condensedList)

ggplot(data = condensedList, mapping = aes(x = trial, y = averageScore, group = 1)) +
  geom_line() +
  coord_cartesian(ylim = c(.3, 1))